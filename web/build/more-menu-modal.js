(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{718:function(e,a,t){"use strict";var n=t(0),o=t.n(n),s=t(27),r=t.n(s),l=t(49),i=t.n(l),c=t(9);a.a=function(e){return o.a.createElement("div",{className:"c-share-header u-flex-none u-border-bottom"},o.a.createElement("div",{className:"u-flexbox u-align-center"},o.a.createElement("h1",{className:"c-share-header__title u-flex u-padding-lg u-h4"},"Share via"),o.a.createElement("div",{className:"u-flexbox u-flex-none u-align-center u-justify-center"},o.a.createElement(r.a,{className:"c-share-header__button u-text-uppercase",onClick:function(){return e()},"data-analytics-name":c.UI_NAME.dismissModal},o.a.createElement(i.a,{name:"close",title:"Close"})))))}},719:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=m(t(5)),o=m(t(33)),s=m(t(13)),r=m(t(14)),l=m(t(17)),i=m(t(16)),c=m(t(0)),u=m(t(12)),d=m(t(57)),p=m(t(150)),f=m(t(149)),h=t(9);function m(e){return e&&e.__esModule?e:{default:e}}var w="COPY_ERROR",b="EMAIL_ERROR",v="PRINT_ERROR",_="SHARE_ERROR",g=function(e,a){var t="share_mobify_id="+window.sandy.instance.getClientID()+"&share_medium="+a;t=-1===e.indexOf("?")?"?"+t:"&"+t;var n=e.indexOf("#");return-1!==n?""+e.substring(0,n)+t+e.substring(n):""+e+t},y=function(e){function a(e){(0,s.default)(this,a);var t=(0,l.default)(this,(a.__proto__||(0,o.default)(a)).call(this,e)),n=t.successHandler.bind(t),r=t.failHandler.bind(t);return t.copyHandler=t.copyHandler.bind(t,{successHandler:n,failHandler:r}),t.emailHandler=t.emailHandler.bind(t,{successHandler:n,failHandler:r}),t.printHandler=t.printHandler.bind(t,{successHandler:n,failHandler:r}),t.fbShareHandler=t.shareHandler.bind(t,{platform:"facebook",successHandler:n,failHandler:r}),t.twShareHandler=t.shareHandler.bind(t,{platform:"twitter",successHandler:n,failHandler:r}),t}return(0,i.default)(a,e),(0,r.default)(a,[{key:"copyHandler",value:function(e){var a=e.successHandler,t=e.failHandler;return function(e){if("function"!=typeof document.execCommand)return!1;e.style.display="inherit",e.select();var a=document.execCommand("copy");return e.style.display="none",a}(this.textArea)?a((0,n.default)({},this.props.shareContent,{shareOption:"copy"})):t(w)}},{key:"emailHandler",value:function(e){var a=e.successHandler,t=e.failHandler;if("function"==typeof window.open){var o=this.props.shareContent,s=o.title,r=o.url+"\n\n"+(o.text||"");window.open(encodeURI("mailto:?subject="+s+"&body="+r)),a((0,n.default)({},this.props.shareContent,{shareOption:"email"}))}else t(b)}},{key:"printHandler",value:function(e){var a=e.successHandler,t=e.failHandler;"function"==typeof window.print?(a((0,n.default)({},this.props.shareContent,{shareOption:"print"})),setTimeout(window.print,25)):t(v)}},{key:"shareHandler",value:function(e){var a=e.platform,t=e.successHandler,o=e.failHandler,s=void 0,r=g(this.props.shareContent.url,a);switch(a){case"facebook":s="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(r);break;default:s="https://twitter.com/share?url="+encodeURIComponent(r)}"function"==typeof window.open?(window.open(s),t((0,n.default)({},this.props.shareContent,{shareOption:a}))):o(_)}},{key:"successHandler",value:function(e){this.props.onDismiss(),this.props.onSuccess((0,n.default)({},e,{url:g(e.url,e.shareOption)}))}},{key:"failHandler",value:function(e){var a=void 0;switch(e){case w:a="document.execCommand('copy') is not supported.";break;case v:a="window.print() is not supported.";break;case b:a="failed to open mail client.";break;default:a="failed to share."}console.error("An error occurred while attempting to share: "+a),this.props.onFail(e),this.props.onDismiss()}},{key:"render",value:function(){var e=this,a=this.props,t=a.optionsPerCol,n=a.optionsPerRow,o=a.shareContent,s=(0,u.default)("pw-share__sheet-content u-padding-lg"),r=function(e){for(var a=e.shareOptions,t=e.optionsPerCol,n=e.optionsPerRow,o=[],s=t*n,r=Math.ceil(a.length/s),l=0;l<r;l++){for(var i=[],p=[],h=0;h<n;h++)i.push([]);for(var m=l*s;m<a.length&&m<(l+1)*s;m++){var w=a[m],b=(0,u.default)("pw-share__option",w.class);i[m%n].push(c.default.createElement("button",{className:b,key:"option-"+m,onClick:w.onClick,"data-analytics-name":w.analyticsName,type:"button"},c.default.createElement(d.default,{className:"pw-share__option-icon",label:w.label,iconName:w.iconName,iconSize:"x-large"})))}for(var v=0;v<i.length;v++)p.push(c.default.createElement("div",{key:"option-column-"+v,className:"pw-share__option-column"},i[v]));o.push(c.default.createElement(f.default,{key:"share-page-wrapper-"+l},c.default.createElement("div",{className:"pw-share__sheet-page u-flex u-flexbox u-direction-row u-justify-around"},p)))}return o}({shareOptions:[{label:"Copy",iconName:"copy",class:"js-share__copy-option",onClick:this.copyHandler,analyticsName:h.UI_NAME.shareCopy},{label:"Email",iconName:"email",class:"js-share__email-option",onClick:this.emailHandler,analyticsName:h.UI_NAME.shareEmail},{label:"Print",iconName:"print",class:"js-share__print-option",onClick:this.printHandler,analyticsName:h.UI_NAME.sharePrint},{label:"Facebook",iconName:"social-facebook",class:"js-share__social-option js--facebook-option",onClick:this.fbShareHandler,analyticsName:h.UI_NAME.shareFacebook},{label:"Twitter",iconName:"social-twitter",class:"js-share__social-option js--twitter-option",onClick:this.twShareHandler,analyticsName:h.UI_NAME.shareTwitter}],optionsPerCol:t,optionsPerRow:n}),l=r.length>1;return c.default.createElement("div",{className:s},c.default.createElement(p.default,{showControls:!1,showPips:l},r),c.default.createElement("textarea",{readOnly:!0,ref:function(a){e.textArea=a},style:{display:"none"},value:o.url,"data-analytics-name":h.UI_NAME.copy}))}}]),a}(c.default.Component);a.default=y},720:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=h(t(33)),o=h(t(13)),s=h(t(14)),r=h(t(17)),l=h(t(16)),i=h(t(0)),c=h(t(1)),u=h(t(12)),d=h(t(99)),p=h(t(719)),f=t(11);function h(e){return e&&e.__esModule?e:{default:e}}var m=function(){return void 0!==navigator.share},w=i.default.createElement("button",null,i.default.createElement("span",null,"Shareâ€¦")),b={title:document.title,url:window.location.href},v=i.default.createElement("h1",{className:"pw-share__sheet-header"},"Share via"),_=function(e){function a(e){(0,o.default)(this,a);var t=(0,r.default)(this,(a.__proto__||(0,n.default)(a)).call(this,e));return t.onShow=t.onShow.bind(t),t.onDismiss=t.onDismiss.bind(t),t}return(0,l.default)(a,e),(0,s.default)(a,[{key:"onShow",value:function(){var e=this;m()?navigator.share({title:this.props.shareContent.title,url:this.props.shareContent.url,text:this.props.shareContent.text}).then(this.props.onSuccess).catch(function(a){e.props.onFail(a),console.error("An error has occurred while attempting to share: ",a)}):this.props.onShow()}},{key:"onDismiss",value:function(){this.props.onDismiss()}},{key:"render",value:function(){var e=this.props,a=e.className,t=e.coverage,n=e.duration,o=e.headerContent,s=e.open,r=e.optionsPerCol,l=e.optionsPerRow,c=e.shareContent,f=e.triggerElement,h=e.didDismiss,w=e.didShow,b=e.onFail,v=e.onSuccess,_=e.willDismiss,g=e.willShow,y=(0,u.default)("pw-share",a),E=(0,u.default)("pw-share__trigger",f.props.className),N=i.default.cloneElement(f,{className:E,onClick:this.onShow});return i.default.createElement("div",{className:y},N,m()?null:i.default.createElement(d.default,{coverage:t,duration:n,effect:"slide-bottom",headerContent:o,open:s,onDismiss:this.onDismiss,onOpen:w,onClose:h,onBeforeClose:_,onBeforeOpen:g},i.default.createElement(p.default,{optionsPerCol:r,optionsPerRow:l,shareContent:c,onDismiss:this.onDismiss,onFail:b,onSuccess:v})))}}]),a}(i.default.Component);_.propTypes={className:c.default.string,coverage:c.default.string,didDismiss:c.default.func,didShow:c.default.func,duration:c.default.number,headerContent:c.default.element,open:c.default.bool,optionsPerCol:c.default.number,optionsPerRow:c.default.number,shareContent:c.default.object,triggerElement:c.default.element,willDismiss:c.default.func,willShow:c.default.func,onDismiss:c.default.func,onFail:c.default.func,onShow:c.default.func,onSuccess:c.default.func},_.defaultProps={coverage:"50%",duration:200,open:!1,optionsPerRow:4,optionsPerCol:2,headerContent:v,shareContent:b,triggerElement:w,didDismiss:f.noop,didShow:f.noop,onDismiss:f.noop,onShow:f.noop,onFail:f.noop,onSuccess:f.noop,willDismiss:f.noop,willShow:f.noop},a.default=_},747:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=r(t(0)),o=r(t(1)),s=r(t(12));function r(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var a=e.className,t=e.label,o=(0,s.default)("pw-divider",{"pw--no-label":!e.label},a);return n.default.createElement("div",{className:o},!!t&&n.default.createElement("span",{className:"pw-divider__text"},t))};l.propTypes={className:o.default.string,label:o.default.oneOfType([o.default.string,o.default.node])},a.default=l},766:function(e,a,t){"use strict";t.r(a);var n=t(13),o=t.n(n),s=t(14),r=t.n(s),l=t(17),i=t.n(l),c=t(16),u=t.n(c),d=t(0),p=t.n(d),f=t(1),h=t.n(f),m=t(20),w=t(12),b=t.n(w),v=t(3),_=t(15),g=t(29),y=t(54),E=t(8),N=t(27),C=t.n(N),S=t(747),k=t.n(S),H=t(720),O=t.n(H),I=t(9),M=t(718),x=t(21),R=t(38),j=t(177),P=function(e){function a(e){o()(this,a);var t=i()(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={active:!1},t}return u()(a,e),r()(a,[{key:"componentWillMount",value:function(){var e=this;setTimeout(function(){requestAnimationFrame(function(){return e.setState({active:!0})})},100)}},{key:"render",value:function(){var e=this.props,a=e.closeModal,t=e.accountURL,n=e.isOpen,o=e.closeShare,s=e.openShare,r=e.isShareOpen,l=e.signInURL,i=e.isLoggedIn,c=b()("m-more-menu",{"m--active":n&&this.state.active}),u="u-justify-start u-padding-start-lg u-padding-end-lg",d=p.a.createElement(C.a,{className:"u-width-block-full",innerClassName:"u-text-size-medium u-justify-start u-padding-start-lg u-padding-end-lg",text:"Share...","data-analytics-name":I.UI_NAME.shareMenu});return p.a.createElement("div",null,p.a.createElement("div",{className:c},p.a.createElement("div",{className:"m-more-menu__content u-align-center u-padding-bottom u-padding-top"},p.a.createElement("div",null,p.a.createElement(C.a,{className:"u-width-block-full",innerClassName:u+" u-color-neutral-60",iconClassName:"u-color-brand u-margin-end",href:j.a,icon:"map","data-analytics-name":I.UI_NAME.showStoreLocator,title:"Store Locations",showIconText:!0}),p.a.createElement(C.a,{innerClassName:u+" u-color-neutral-60",iconClassName:"u-color-brand u-margin-end",href:i?t:l,icon:"user","data-analytics-name":I.UI_NAME.showStoreLocator,title:i?"My Account":"Sign In",showIconText:!0})),p.a.createElement(k.a,null),p.a.createElement("div",null,p.a.createElement(C.a,{className:"u-width-block-full",innerClassName:u,text:"Forward",onClick:function(){E.browserHistory.goForward()},"data-analytics-name":I.UI_NAME.browserForward}),p.a.createElement(C.a,{className:"u-width-block-full",innerClassName:u,text:"Refresh",onClick:function(){window.location.reload()}}),p.a.createElement(O.a,{triggerElement:d,open:r,onShow:s,onDismiss:o,headerContent:Object(M.a)(o),coverage:"40%"})))),p.a.createElement("div",{tabIndex:"-1",role:"presentation",className:"m-more-menu__shade",onTouchStart:a}))}}]),a}(p.a.Component);P.propTypes={accountURL:h.a.string,closeModal:h.a.func,closeShare:h.a.func,isLoggedIn:h.a.bool,isOpen:h.a.bool,isShareOpen:h.a.bool,openShare:h.a.func,signInURL:h.a.string};var U=Object(v.createPropsSelector)({accountURL:x.d,isLoggedIn:R.getIsLoggedIn,isOpen:Object(y.isModalOpen)(_.j),isShareOpen:Object(y.isModalOpen)("share"),signInURL:x.j}),A={closeModal:function(){return Object(g.a)(_.j,I.UI_NAME.removeItem)},closeShare:function(){return Object(g.a)("share",I.UI_NAME.shareMenu)},openShare:function(){return Object(g.b)("share",I.UI_NAME.shareMenu)}};a.default=Object(m.connect)(U,A)(P)}}]);
//# sourceMappingURL=more-menu-modal.js.map